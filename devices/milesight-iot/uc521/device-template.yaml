metadata:
  lora_device_profile_class: ClassC-OTAA
definition:
  input:
    type: object
    properties:
      - key: device_id
        type: string
        required: true
        is_device_id: true
      - key: ipso_version
        type: string
        entity_mapping: ipso_version
      - key: hardware_version
        type: string
        entity_mapping: hardware_version
      - key: firmware_version
        type: string
        entity_mapping: firmware_version
      - key: tsl_version
        type: string
        entity_mapping: tsl_version
      - key: sn
        type: string
        entity_mapping: sn
      - key: lorawan_class
        type: long
        entity_mapping: lorawan_class
      - key: reset_event
        type: boolean
        entity_mapping: reset_event
      - key: device_status
        type: boolean
        entity_mapping: device_status
      - key: battery
        type: long
        entity_mapping: battery
      - key: valve_1_type
        type: long
        entity_mapping: valve_1_type
      - key: valve_1_opening
        type: long
        entity_mapping: valve_1_opening
      - key: valve_1_direction
        type: long
        entity_mapping: valve_1_direction
      - key: valve_2_type
        type: long
        entity_mapping: valve_2_type
      - key: valve_2_opening
        type: long
        entity_mapping: valve_2_opening
      - key: valve_2_direction
        type: long
        entity_mapping: valve_2_direction
      - key: valve_1_pulse
        type: long
        entity_mapping: valve_1_pulse
      - key: valve_2_pulse
        type: long
        entity_mapping: valve_2_pulse
      - key: gpio_1
        type: boolean
        entity_mapping: gpio_1
      - key: gpio_2
        type: boolean
        entity_mapping: gpio_2
      - key: pressure_1
        type: long
        entity_mapping: pressure_1
      - key: pressure_2
        type: long
        entity_mapping: pressure_2
      - key: pressure_1_alarm_event.source
        type: long
        entity_mapping: pressure_1_alarm_event.source
      - key: pressure_1_alarm_event.condition
        type: long
        entity_mapping: pressure_1_alarm_event.condition
      - key: pressure_1_alarm_event.threshold_min
        type: long
        entity_mapping: pressure_1_alarm_event.threshold_min
      - key: pressure_1_alarm_event.threshold_max
        type: long
        entity_mapping: pressure_1_alarm_event.threshold_max
      - key: pressure_1_alarm_event.pressure
        type: long
        entity_mapping: pressure_1_alarm_event.pressure
      - key: pressure_1_alarm_event.alarm
        type: long
        entity_mapping: pressure_1_alarm_event.alarm
      - key: pressure_2_alarm_event.source
        type: long
        entity_mapping: pressure_2_alarm_event.source
      - key: pressure_2_alarm_event.condition
        type: long
        entity_mapping: pressure_2_alarm_event.condition
      - key: pressure_2_alarm_event.threshold_min
        type: long
        entity_mapping: pressure_2_alarm_event.threshold_min
      - key: pressure_2_alarm_event.threshold_max
        type: long
        entity_mapping: pressure_2_alarm_event.threshold_max
      - key: pressure_2_alarm_event.pressure
        type: long
        entity_mapping: pressure_2_alarm_event.pressure
      - key: pressure_2_alarm_event.alarm
        type: long
        entity_mapping: pressure_2_alarm_event.alarm
      - key: valve_1_calibration_event.source_value
        type: long
        entity_mapping: valve_1_calibration_event.source_value
      - key: valve_1_calibration_event.target_value
        type: long
        entity_mapping: valve_1_calibration_event.target_value
      - key: valve_1_calibration_event.result
        type: long
        entity_mapping: valve_1_calibration_event.result
      - key: valve_1_sensor_status
        type: long
        entity_mapping: valve_1_sensor_status
      - key: valve_2_sensor_status
        type: long
        entity_mapping: valve_2_sensor_status
      - key: pressure_1_sensor_status
        type: long
        entity_mapping: pressure_1_sensor_status
      - key: pressure_2_sensor_status
        type: long
        entity_mapping: pressure_2_sensor_status
      - key: valve_1_opening_duration
        type: long
        entity_mapping: valve_1_opening_duration
      - key: valve_2_opening_duration
        type: long
        entity_mapping: valve_2_opening_duration
      - key: custom_message
        type: string
        entity_mapping: custom_message
      - key: report_interval
        type: long
        entity_mapping: report_interval
      - key: pressure_1_collection_interval.enable
        type: boolean
        entity_mapping: pressure_1_collection_interval.enable
      - key: pressure_1_collection_interval.collection_interval
        type: long
        entity_mapping: pressure_1_collection_interval.collection_interval
      - key: pressure_2_collection_interval.enable
        type: boolean
        entity_mapping: pressure_2_collection_interval.enable
      - key: pressure_2_collection_interval.collection_interval
        type: long
        entity_mapping: pressure_2_collection_interval.collection_interval
      - key: time_zone
        type: long
        entity_mapping: time_zone
      - key: valve_1_task.task_id
        type: long
        entity_mapping: valve_1_task.task_id
      - key: valve_1_task.valve_opening
        type: long
        entity_mapping: valve_1_task.valve_opening
      - key: valve_1_task.time
        type: long
        entity_mapping: valve_1_task.time
      - key: valve_1_task.pulse
        type: long
        entity_mapping: valve_1_task.pulse
      - key: valve_2_task.task_id
        type: long
        entity_mapping: valve_2_task.task_id
      - key: valve_2_task.valve_opening
        type: long
        entity_mapping: valve_2_task.valve_opening
      - key: valve_2_task.time
        type: long
        entity_mapping: valve_2_task.time
      - key: valve_2_task.pulse
        type: long
        entity_mapping: valve_2_task.pulse
      - key: valve_1_config.valve_type
        type: long
        entity_mapping: valve_1_config.valve_type
      - key: valve_1_config.auto_calibration_enable
        type: boolean
        entity_mapping: valve_1_config.auto_calibration_enable
      - key: valve_1_config.report_after_calibration_enable
        type: boolean
        entity_mapping: valve_1_config.report_after_calibration_enable
      - key: valve_1_config.stall_strategy
        type: long
        entity_mapping: valve_1_config.stall_strategy
      - key: valve_1_config.open_time_1
        type: long
        entity_mapping: valve_1_config.open_time_1
      - key: valve_1_config.open_time_2
        type: long
        entity_mapping: valve_1_config.open_time_2
      - key: valve_1_config.stall_current
        type: long
        entity_mapping: valve_1_config.stall_current
      - key: valve_1_config.stall_time
        type: long
        entity_mapping: valve_1_config.stall_time
      - key: valve_1_config.protect_time
        type: long
        entity_mapping: valve_1_config.protect_time
      - key: valve_1_config.close_delay_time
        type: long
        entity_mapping: valve_1_config.close_delay_time
      - key: valve_1_config.open_delay_time
        type: long
        entity_mapping: valve_1_config.open_delay_time
      - key: valve_2_config.valve_type
        type: long
        entity_mapping: valve_2_config.valve_type
      - key: valve_2_config.auto_calibration_enable
        type: boolean
        entity_mapping: valve_2_config.auto_calibration_enable
      - key: valve_2_config.report_after_calibration_enable
        type: boolean
        entity_mapping: valve_2_config.report_after_calibration_enable
      - key: valve_2_config.stall_strategy
        type: long
        entity_mapping: valve_2_config.stall_strategy
      - key: valve_2_config.open_time_1
        type: long
        entity_mapping: valve_2_config.open_time_1
      - key: valve_2_config.open_time_2
        type: long
        entity_mapping: valve_2_config.open_time_2
      - key: valve_2_config.stall_current
        type: long
        entity_mapping: valve_2_config.stall_current
      - key: valve_2_config.stall_time
        type: long
        entity_mapping: valve_2_config.stall_time
      - key: valve_2_config.protect_time
        type: long
        entity_mapping: valve_2_config.protect_time
      - key: valve_2_config.close_delay_time
        type: long
        entity_mapping: valve_2_config.close_delay_time
      - key: valve_2_config.open_delay_time
        type: long
        entity_mapping: valve_2_config.open_delay_time
      - key: valve_filter_config.mode
        type: long
        entity_mapping: valve_filter_config.mode
      - key: valve_filter_config.time
        type: long
        entity_mapping: valve_filter_config.time
      - key: pressure_1_calibration_settings.enable
        type: boolean
        entity_mapping: pressure_1_calibration_settings.enable
      - key: pressure_1_calibration_settings.calibration_value
        type: long
        entity_mapping: pressure_1_calibration_settings.calibration_value
      - key: pressure_2_calibration_settings.enable
        type: boolean
        entity_mapping: pressure_2_calibration_settings.enable
      - key: pressure_2_calibration_settings.calibration_value
        type: long
        entity_mapping: pressure_2_calibration_settings.calibration_value
      - key: wiring_switch_enable
        type: boolean
        entity_mapping: wiring_switch_enable
      - key: valve_change_report_enable
        type: boolean
        entity_mapping: valve_change_report_enable
      - key: gpio_1_type
        type: long
        entity_mapping: gpio_1_type
      - key: gpio_2_type
        type: long
        entity_mapping: gpio_2_type
      - key: pressure_1_config.enable
        type: boolean
        entity_mapping: pressure_1_config.enable
      - key: pressure_1_config.collection_interval
        type: long
        entity_mapping: pressure_1_config.collection_interval
      - key: pressure_1_config.display_unit
        type: long
        entity_mapping: pressure_1_config.display_unit
      - key: pressure_1_config.mode
        type: long
        entity_mapping: pressure_1_config.mode
      - key: pressure_1_config.signal_type
        type: long
        entity_mapping: pressure_1_config.signal_type
      - key: pressure_1_config.osl
        type: long
        entity_mapping: pressure_1_config.osl
      - key: pressure_1_config.osh
        type: long
        entity_mapping: pressure_1_config.osh
      - key: pressure_1_config.power_supply_time
        type: long
        entity_mapping: pressure_1_config.power_supply_time
      - key: pressure_1_config.range_min
        type: long
        entity_mapping: pressure_1_config.range_min
      - key: pressure_1_config.range_max
        type: long
        entity_mapping: pressure_1_config.range_max
      - key: pressure_2_config.enable
        type: boolean
        entity_mapping: pressure_2_config.enable
      - key: pressure_2_config.collection_interval
        type: long
        entity_mapping: pressure_2_config.collection_interval
      - key: pressure_2_config.display_unit
        type: long
        entity_mapping: pressure_2_config.display_unit
      - key: pressure_2_config.mode
        type: long
        entity_mapping: pressure_2_config.mode
      - key: pressure_2_config.signal_type
        type: long
        entity_mapping: pressure_2_config.signal_type
      - key: pressure_2_config.osl
        type: long
        entity_mapping: pressure_2_config.osl
      - key: pressure_2_config.osh
        type: long
        entity_mapping: pressure_2_config.osh
      - key: pressure_2_config.power_supply_time
        type: long
        entity_mapping: pressure_2_config.power_supply_time
      - key: pressure_2_config.range_min
        type: long
        entity_mapping: pressure_2_config.range_min
      - key: pressure_2_config.range_max
        type: long
        entity_mapping: pressure_2_config.range_max
      - key: d2d_key
        type: string
        entity_mapping: d2d_key
      - key: d2d_enable
        type: boolean
        entity_mapping: d2d_enable
      - key: response_enable
        type: boolean
        entity_mapping: response_enable
      - key: class_a_response_time
        type: long
        entity_mapping: class_a_response_time
      - key: gpio_jitter_time
        type: long
        entity_mapping: gpio_jitter_time
  output:
    type: object
    properties:
      - key: reboot
        type: boolean
        entity_mapping: reboot
      - key: report_status
        type: boolean
        entity_mapping: report_status
      - key: report_interval
        type: long
        entity_mapping: report_interval
      - key: sync_time
        type: boolean
        entity_mapping: sync_time
      - key: pressure_1_collection_interval.enable
        type: boolean
        entity_mapping: pressure_1_collection_interval.enable
      - key: pressure_1_collection_interval.collection_interval
        type: long
        entity_mapping: pressure_1_collection_interval.collection_interval
      - key: pressure_2_collection_interval.enable
        type: boolean
        entity_mapping: pressure_2_collection_interval.enable
      - key: pressure_2_collection_interval.collection_interval
        type: long
        entity_mapping: pressure_2_collection_interval.collection_interval
      - key: time_zone
        type: long
        entity_mapping: time_zone
      - key: valve_1_task.task_id
        type: long
        entity_mapping: valve_1_task.task_id
      - key: valve_1_task.valve_opening
        type: long
        entity_mapping: valve_1_task.valve_opening
      - key: valve_1_task.time
        type: long
        entity_mapping: valve_1_task.time
      - key: valve_1_task.pulse
        type: long
        entity_mapping: valve_1_task.pulse
      - key: valve_2_task.task_id
        type: long
        entity_mapping: valve_2_task.task_id
      - key: valve_2_task.valve_opening
        type: long
        entity_mapping: valve_2_task.valve_opening
      - key: valve_2_task.time
        type: long
        entity_mapping: valve_2_task.time
      - key: valve_2_task.pulse
        type: long
        entity_mapping: valve_2_task.pulse
      - key: clear_valve_1_pulse
        type: boolean
        entity_mapping: clear_valve_1_pulse
      - key: clear_valve_2_pulse
        type: boolean
        entity_mapping: clear_valve_2_pulse
      - key: valve_1_config.valve_type
        type: long
        entity_mapping: valve_1_config.valve_type
      - key: valve_1_config.auto_calibration_enable
        type: boolean
        entity_mapping: valve_1_config.auto_calibration_enable
      - key: valve_1_config.report_after_calibration_enable
        type: boolean
        entity_mapping: valve_1_config.report_after_calibration_enable
      - key: valve_1_config.stall_strategy
        type: long
        entity_mapping: valve_1_config.stall_strategy
      - key: valve_1_config.open_time_1
        type: long
        entity_mapping: valve_1_config.open_time_1
      - key: valve_1_config.open_time_2
        type: long
        entity_mapping: valve_1_config.open_time_2
      - key: valve_1_config.stall_current
        type: long
        entity_mapping: valve_1_config.stall_current
      - key: valve_1_config.stall_time
        type: long
        entity_mapping: valve_1_config.stall_time
      - key: valve_1_config.protect_time
        type: long
        entity_mapping: valve_1_config.protect_time
      - key: valve_1_config.close_delay_time
        type: long
        entity_mapping: valve_1_config.close_delay_time
      - key: valve_1_config.open_delay_time
        type: long
        entity_mapping: valve_1_config.open_delay_time
      - key: valve_2_config.valve_type
        type: long
        entity_mapping: valve_2_config.valve_type
      - key: valve_2_config.auto_calibration_enable
        type: boolean
        entity_mapping: valve_2_config.auto_calibration_enable
      - key: valve_2_config.report_after_calibration_enable
        type: boolean
        entity_mapping: valve_2_config.report_after_calibration_enable
      - key: valve_2_config.stall_strategy
        type: long
        entity_mapping: valve_2_config.stall_strategy
      - key: valve_2_config.open_time_1
        type: long
        entity_mapping: valve_2_config.open_time_1
      - key: valve_2_config.open_time_2
        type: long
        entity_mapping: valve_2_config.open_time_2
      - key: valve_2_config.stall_current
        type: long
        entity_mapping: valve_2_config.stall_current
      - key: valve_2_config.stall_time
        type: long
        entity_mapping: valve_2_config.stall_time
      - key: valve_2_config.protect_time
        type: long
        entity_mapping: valve_2_config.protect_time
      - key: valve_2_config.close_delay_time
        type: long
        entity_mapping: valve_2_config.close_delay_time
      - key: valve_2_config.open_delay_time
        type: long
        entity_mapping: valve_2_config.open_delay_time
      - key: valve_filter_config.mode
        type: long
        entity_mapping: valve_filter_config.mode
      - key: valve_filter_config.time
        type: long
        entity_mapping: valve_filter_config.time
      - key: pressure_1_calibration_settings.enable
        type: boolean
        entity_mapping: pressure_1_calibration_settings.enable
      - key: pressure_1_calibration_settings.calibration_value
        type: long
        entity_mapping: pressure_1_calibration_settings.calibration_value
      - key: pressure_2_calibration_settings.enable
        type: boolean
        entity_mapping: pressure_2_calibration_settings.enable
      - key: pressure_2_calibration_settings.calibration_value
        type: long
        entity_mapping: pressure_2_calibration_settings.calibration_value
      - key: wiring_switch_enable
        type: boolean
        entity_mapping: wiring_switch_enable
      - key: valve_change_report_enable
        type: boolean
        entity_mapping: valve_change_report_enable
      - key: query_valve_opening_duration.valve_1
        type: boolean
        entity_mapping: query_valve_opening_duration.valve_1
      - key: query_valve_opening_duration.valve_2
        type: boolean
        entity_mapping: query_valve_opening_duration.valve_2
      - key: gpio_1_type
        type: long
        entity_mapping: gpio_1_type
      - key: gpio_2_type
        type: long
        entity_mapping: gpio_2_type
      - key: query_device_config
        type: boolean
        entity_mapping: query_device_config
      - key: query_pressure_calibration_settings
        type: boolean
        entity_mapping: query_pressure_calibration_settings
      - key: query_gpio_type
        type: boolean
        entity_mapping: query_gpio_type
      - key: query_valve_config
        type: boolean
        entity_mapping: query_valve_config
      - key: query_pressure_config
        type: boolean
        entity_mapping: query_pressure_config
      - key: query_rule_config
        type: boolean
        entity_mapping: query_rule_config
      - key: pressure_1_config.enable
        type: boolean
        entity_mapping: pressure_1_config.enable
      - key: pressure_1_config.collection_interval
        type: long
        entity_mapping: pressure_1_config.collection_interval
      - key: pressure_1_config.display_unit
        type: long
        entity_mapping: pressure_1_config.display_unit
      - key: pressure_1_config.mode
        type: long
        entity_mapping: pressure_1_config.mode
      - key: pressure_1_config.signal_type
        type: long
        entity_mapping: pressure_1_config.signal_type
      - key: pressure_1_config.osl
        type: long
        entity_mapping: pressure_1_config.osl
      - key: pressure_1_config.osh
        type: long
        entity_mapping: pressure_1_config.osh
      - key: pressure_1_config.power_supply_time
        type: long
        entity_mapping: pressure_1_config.power_supply_time
      - key: pressure_1_config.range_min
        type: long
        entity_mapping: pressure_1_config.range_min
      - key: pressure_1_config.range_max
        type: long
        entity_mapping: pressure_1_config.range_max
      - key: pressure_2_config.enable
        type: boolean
        entity_mapping: pressure_2_config.enable
      - key: pressure_2_config.collection_interval
        type: long
        entity_mapping: pressure_2_config.collection_interval
      - key: pressure_2_config.display_unit
        type: long
        entity_mapping: pressure_2_config.display_unit
      - key: pressure_2_config.mode
        type: long
        entity_mapping: pressure_2_config.mode
      - key: pressure_2_config.signal_type
        type: long
        entity_mapping: pressure_2_config.signal_type
      - key: pressure_2_config.osl
        type: long
        entity_mapping: pressure_2_config.osl
      - key: pressure_2_config.osh
        type: long
        entity_mapping: pressure_2_config.osh
      - key: pressure_2_config.power_supply_time
        type: long
        entity_mapping: pressure_2_config.power_supply_time
      - key: pressure_2_config.range_min
        type: long
        entity_mapping: pressure_2_config.range_min
      - key: pressure_2_config.range_max
        type: long
        entity_mapping: pressure_2_config.range_max
      - key: d2d_key
        type: string
        entity_mapping: d2d_key
      - key: d2d_enable
        type: boolean
        entity_mapping: d2d_enable
      - key: response_enable
        type: boolean
        entity_mapping: response_enable
      - key: class_a_response_time
        type: long
        entity_mapping: class_a_response_time
      - key: gpio_jitter_time
        type: long
        entity_mapping: gpio_jitter_time
initial_entities:
  - name: IPSO 版本
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 6
    identifier: ipso_version
  - name: 硬件版本
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 6
    identifier: hardware_version
  - name: 固件版本
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 6
    identifier: firmware_version
  - name: 物模型版本
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 6
    identifier: tsl_version
  - name: 设备SN码
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 16
    identifier: sn
  - name: LoRaWAN 工作模式
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': Class A
        '1': Class B
        '2': Class C
        '3': Class CtoB
    identifier: lorawan_class
  - name: 重置事件
    type: property
    access_mod: R
    value_type: boolean
    attributes:
      enum:
        'false': 正常
        'true': 重置
    identifier: reset_event
  - name: 设备状态
    type: property
    access_mod: R
    value_type: boolean
    attributes:
      enum:
        'false': '关机'
        'true': '开机'
    identifier: device_status
  - name: 电池电量
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: '%'
    identifier: battery
  - name: 阀门1类型
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 双通球阀
        '1': 三通球阀
    identifier: valve_1_type
  - name: 阀门1开度
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: '%'
    identifier: valve_1_opening
    important: 1
  - name: 阀门1方向
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 左
        '1': 右
    identifier: valve_1_direction
  - name: 阀门2类型
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 双通球阀
        '1': 三通球阀
    identifier: valve_2_type
  - name: 阀门2开度
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: '%'
    identifier: valve_2_opening
    important: 2
  - name: 阀门2方向
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 左
        '1': 右
    identifier: valve_2_direction
  - name: 阀门1脉冲计数
    type: property
    access_mod: R
    value_type: long
    identifier: valve_1_pulse
  - name: 阀门2脉冲计数
    type: property
    access_mod: R
    value_type: long
    identifier: valve_2_pulse
  - name: GPIO 1
    type: property
    access_mod: R
    value_type: boolean
    attributes:
      enum:
        'false': 低
        'true': 高
    identifier: gpio_1
  - name: GPIO 2
    type: property
    access_mod: R
    value_type: boolean
    attributes:
      enum:
        'false': 低
        'true': 高
    identifier: gpio_2
  - name: 压力值1
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: kPa
    identifier: pressure_1
  - name: 压力值2
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: kPa
    identifier: pressure_2
  - identifier: pressure_1_alarm_event
    name: 压力值1告警事件
    type: property
    access_mod: R
    value_type: object
    children:
      - name: 阀门条件
        value_type: long
        attributes:
          enum:
            '0': 每次变化
            '1': 阀门1开启
            '2': 阀门2开启
            '3': 阀门1开启或阀门2开启
        identifier: source
      - name: 阈值条件
        value_type: long
        attributes:
          enum:
            '0': 无
            '1': 小于
            '2': 大于
            '3': 介于
            '4': 脱离
        identifier: condition
      - name: 最小阈值
        value_type: long
        attributes:
          unit: kPa
        identifier: threshold_min
      - name: 最大阈值
        value_type: long
        attributes:
          unit: kPa
        identifier: threshold_max
      - name: 压力值1
        value_type: long
        attributes:
          unit: kPa
        identifier: pressure
      - name: 告警内容
        value_type: long
        attributes:
          enum:
            '0': 管道压力阈值告警释放
            '1': 管道压力阈值告警
        identifier: alarm
  - identifier: pressure_2_alarm_event
    name: 压力值2告警事件
    type: property
    access_mod: R
    value_type: object
    children:
      - name: 阀门条件
        value_type: long
        attributes:
          enum:
            '0': 每次变化
            '1': 阀门1开启
            '2': 阀门2开启
            '3': 阀门1开启或阀门2开启
        identifier: source
      - name: 阈值条件
        value_type: long
        attributes:
          enum:
            '0': 无
            '1': 小于
            '2': 大于
            '3': 介于
            '4': 脱离
        identifier: condition
      - name: 最小阈值
        value_type: long
        attributes:
          unit: kPa
        identifier: threshold_min
      - name: 最大阈值
        value_type: long
        attributes:
          unit: kPa
        identifier: threshold_max
      - name: 压力值2
        value_type: long
        attributes:
          unit: kPa
        identifier: pressure
      - name: 告警内容
        value_type: long
        attributes:
          enum:
            '0': 管道压力阈值告警释放
            '1': 管道压力阈值告警
        identifier: alarm
  - identifier: valve_1_calibration_event
    name: 阀门1校准事件
    type: property
    access_mod: R
    value_type: object
    children:
      - name: 源值
        value_type: long
        attributes:
          unit: '%'
        identifier: source_value
      - name: 目标值
        value_type: long
        attributes:
          unit: '%'
        identifier: target_value
      - name: 结果
        value_type: long
        attributes:
          enum:
            '0': 成功
            '1': 失败
        identifier: result
  - name: 阀门1传感器状态
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 低电量无法开阀
        '1': 收到错误反馈，关闭阀门
        '2': 开阀时间配置错误
        '3': 超时
        '4': 阀门堵转，需要手动处理
    identifier: valve_1_sensor_status
  - name: 阀门2传感器状态
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '0': 低电量无法开阀
        '1': 收到错误反馈，关闭阀门
        '2': 开阀时间配置错误
        '3': 超时
        '4': 阀门堵转，需要手动处理
    identifier: valve_2_sensor_status
  - name: 压力值1传感器状态
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '1': 读取错误
    identifier: pressure_1_sensor_status
  - name: 压力值2传感器状态
    type: property
    access_mod: R
    value_type: long
    attributes:
      enum:
        '1': 读取错误
    identifier: pressure_2_sensor_status
  - name: 阀门1开度持续时间
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: s
    identifier: valve_1_opening_duration
  - name: 阀门2开度持续时间
    type: property
    access_mod: R
    value_type: long
    attributes:
      unit: s
    identifier: valve_2_opening_duration
  - name: 自定义消息
    type: property
    access_mod: R
    value_type: string
    attributes:
      max_length: 8
    identifier: custom_message
  - name: 重启
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: reboot
  - name: 上报状态
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: report_status
  - name: 上报周期
    type: property
    access_mod: RW
    value_type: long
    attributes:
      unit: min
    identifier: report_interval
  - name: 同步时间
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: sync_time
  - identifier: pressure_1_collection_interval
    name: 压力值1采集周期设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 采集周期
        value_type: long
        attributes:
          unit: s
        identifier: collection_interval
  - identifier: pressure_2_collection_interval
    name: 压力值2采集周期设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 采集周期
        value_type: long
        attributes:
          unit: s
        identifier: collection_interval
  - name: 时区
    type: property
    access_mod: RW
    value_type: long
    attributes:
      enum:
        '0': UTC
        '60': UTC+1
        '120': UTC+2
        '180': UTC+3
        '210': UTC+3:30
        '240': UTC+4
        '270': UTC+4:30
        '300': UTC+5
        '330': UTC+5:30
        '345': UTC+5:45
        '360': UTC+6
        '390': UTC+6:30
        '420': UTC+7
        '480': UTC+8
        '540': UTC+9
        '570': UTC+9:30
        '600': UTC+10
        '630': UTC+10:30
        '660': UTC+11
        '720': UTC+12
        '765': UTC+12:45
        '780': UTC+13
        '840': UTC+14
        '-720': UTC-12
        '-660': UTC-11
        '-600': UTC-10
        '-570': UTC-9:30
        '-540': UTC-9
        '-480': UTC-8
        '-420': UTC-7
        '-360': UTC-6
        '-300': UTC-5
        '-240': UTC-4
        '-210': UTC-3:30
        '-180': UTC-3
        '-120': UTC-2
        '-60': UTC-1
    identifier: time_zone
  - identifier: valve_1_task
    name: 阀门1控制
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 控制顺序ID
        value_type: long
        identifier: task_id
      - name: 阀门1开度
        value_type: long
        identifier: valve_opening
      - name: 持续时间
        value_type: long
        attributes:
          unit: min
          optional: true
        identifier: time
      - name: 脉冲流量
        value_type: long
        identifier: pulse
        attributes:
          optional: true
  - identifier: valve_2_task
    name: 阀门2控制
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 控制顺序ID
        value_type: long
        identifier: task_id
      - name: 阀门2开度
        value_type: long
        identifier: valve_opening
      - name: 持续时间
        value_type: long
        attributes:
          unit: min
          optional: true
        identifier: time
      - name: 脉冲流量
        value_type: long
        identifier: pulse
        attributes:
          optional: true
  - name: 清除阀门1脉冲计数
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': 'no'
        'true': 'yes'
    identifier: clear_valve_1_pulse
  - name: 清除阀门2脉冲计数
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: clear_valve_2_pulse
  - identifier: valve_1_config
    name: 阀门1设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 阀门1类型
        value_type: long
        attributes:
          enum:
            '0': 双通球阀
            '1': 三通球阀
        identifier: valve_type
      - name: 自动校准
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: auto_calibration_enable
      - name: 校准后是否上报
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: report_after_calibration_enable
      - name: 堵转后操作
        value_type: long
        attributes:
          enum:
            '0': 关闭阀门
            '1': 保持开度
        identifier: stall_strategy
      - name: 阀门1开启时间1
        value_type: long
        attributes:
          unit: s
        identifier: open_time_1
      - name: 阀门1开启时间2
        value_type: long
        attributes:
          unit: s
        identifier: open_time_2
      - name: 阀门1堵转电流
        value_type: long
        attributes:
          unit: mA
        identifier: stall_current
      - name: 阀门1堵转时间
        value_type: long
        attributes:
          unit: ms
        identifier: stall_time
      - name: 阀门1反转保护时间
        value_type: long
        attributes:
          unit: s
        identifier: protect_time
      - name: 阀门1关闭延迟时间
        value_type: long
        attributes:
          unit: s
        identifier: close_delay_time
      - name: 阀门1开启延迟时间
        value_type: long
        attributes:
          unit: s
        identifier: open_delay_time
  - identifier: valve_2_config
    name: 阀门2设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 阀门2类型
        value_type: long
        attributes:
          enum:
            '0': 双通球阀
            '1': 三通球阀
        identifier: valve_type
      - name: 自动校准
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: auto_calibration_enable
      - name: 校准后是否上报
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: report_after_calibration_enable
      - name: 堵转后操作
        value_type: long
        attributes:
          enum:
            '0': 关闭阀门
            '1': 保持开度
        identifier: stall_strategy
      - name: 阀门2开启时间1
        value_type: long
        attributes:
          unit: s
        identifier: open_time_1
      - name: 阀门2开启时间2
        value_type: long
        attributes:
          unit: s
        identifier: open_time_2
      - name: 阀门2堵转电流
        value_type: long
        attributes:
          unit: mA
        identifier: stall_current
      - name: 阀门2堵转时间
        value_type: long
        attributes:
          unit: ms
        identifier: stall_time
      - name: 阀门2反转保护时间
        value_type: long
        attributes:
          unit: s
        identifier: protect_time
      - name: 阀门2关闭延迟时间
        value_type: long
        attributes:
          unit: s
        identifier: close_delay_time
      - name: 阀门2开启延迟时间
        value_type: long
        attributes:
          unit: s
        identifier: open_delay_time
  - identifier: valve_filter_config
    name: 阀门滤波设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 模式
        value_type: long
        attributes:
          enum:
            '1': hardware
            '2': software
        identifier: mode
      - name: 时间
        value_type: long
        attributes:
          unit: s
        identifier: time
  - identifier: pressure_1_calibration_settings
    name: 压力值1校准设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 压力值1校准值
        value_type: long
        attributes:
          unit: kPa
        identifier: calibration_value
  - identifier: pressure_2_calibration_settings
    name: 压力值2校准设置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 压力值2校准值
        value_type: long
        attributes:
          unit: kPa
        identifier: calibration_value
  - name: 接线开关
    type: property
    access_mod: RW
    value_type: boolean
    attributes:
      enum:
        'false': 禁用
        'true': 启用
    identifier: wiring_switch_enable
  - name: 阀门变换上报
    type: property
    access_mod: RW
    value_type: boolean
    attributes:
      enum:
        'false': 禁用
        'true': 启用
    identifier: valve_change_report_enable
  - identifier: query_valve_opening_duration
    name: 查询阀门开度持续时间
    type: service
    access_mod: W
    value_type: object
    children:
      - name: 阀门1
        value_type: boolean
        attributes:
          enum:
            'false': '否'
            'true': '是'
        identifier: valve_1
      - name: 阀门2
        value_type: boolean
        attributes:
          enum:
            'false': '否'
            'true': '是'
        identifier: valve_2
  - name: GPIO 1 类型
    type: property
    access_mod: RW
    value_type: long
    attributes:
      enum:
        '0': 计数
        '1': 错误反馈
    identifier: gpio_1_type
  - name: GPIO 2 类型
    type: property
    access_mod: RW
    value_type: long
    attributes:
      enum:
        '0': 计数
        '1': 错误反馈
    identifier: gpio_2_type
  - name: 查询设备配置
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_device_config
  - name: 查询压力校准配置
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_pressure_calibration_settings
  - name: 查询 GPIO 类型
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_gpio_type
  - name: 查询阀门配置
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_valve_config
  - name: 查询压力配置
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_pressure_config
  - name: 查询规则配置
    type: service
    access_mod: W
    value_type: boolean
    attributes:
      enum:
        'false': '否'
        'true': '是'
    identifier: query_rule_config
  - identifier: pressure_1_config
    name: 压力值1配置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 采集周期
        value_type: long
        attributes:
          unit: ms
        identifier: collection_interval
      - name: 显示单位
        value_type: long
        attributes:
          enum:
            '0': kPa
            '1': Bar
            '2': MPa
        identifier: display_unit
      - name: 模式
        value_type: long
        attributes:
          enum:
            '0': 标准
            '1': 自定义
        identifier: mode
      - name: 信号类型
        value_type: long
        attributes:
          enum:
            '0': 电压
            '1': 电流
        identifier: signal_type
      - name: OSL
        value_type: long
        identifier: osl
      - name: OSH
        value_type: long
        identifier: osh
      - name: 供电时间
        value_type: long
        attributes:
          unit: ms
        identifier: power_supply_time
      - name: 最小范围
        value_type: long
        identifier: range_min
      - name: 最大范围
        value_type: long
        identifier: range_max
  - identifier: pressure_2_config
    name: 压力值2配置
    type: property
    access_mod: RW
    value_type: object
    children:
      - name: 是否启用
        value_type: boolean
        attributes:
          enum:
            'false': 禁用
            'true': 启用
        identifier: enable
      - name: 采集周期
        value_type: long
        attributes:
          unit: ms
        identifier: collection_interval
      - name: 显示单位
        value_type: long
        attributes:
          enum:
            '0': kPa
            '1': Bar
            '2': MPa
        identifier: display_unit
      - name: 模式
        value_type: long
        attributes:
          enum:
            '0': 标准
            '1': 自定义
        identifier: mode
      - name: 信号类型
        value_type: long
        attributes:
          enum:
            '0': 电压
            '1': 电流
        identifier: signal_type
      - name: OSL
        value_type: long
        identifier: osl
      - name: OSH
        value_type: long
        identifier: osh
      - name: 供电时间
        value_type: long
        attributes:
          unit: ms
        identifier: power_supply_time
      - name: 最小范围
        value_type: long
        identifier: range_min
      - name: 最大范围
        value_type: long
        identifier: range_max
  - name: D2D 键
    type: property
    access_mod: RW
    value_type: string
    attributes:
      max_length: 16
    identifier: d2d_key
  - name: 是否启用D2D控制
    type: property
    access_mod: RW
    value_type: boolean
    attributes:
      enum:
        'false': 禁用
        'true': 启用
    identifier: d2d_enable
  - name: 应答功能
    type: property
    access_mod: RW
    value_type: boolean
    attributes:
      enum:
        'false': 禁用
        'true': 启用
    identifier: response_enable
  - name: Class A应答时间
    type: property
    access_mod: RW
    value_type: long
    attributes:
      unit: s
    identifier: class_a_response_time
  - name: GPIO抖动时间
    type: property
    access_mod: RW
    value_type: long
    attributes:
      unit: s
    identifier: gpio_jitter_time
codec:
  id: default
  ref: uc521/codec/device-codec.yaml
blueprint:
  dir: uc521/blueprint/
  values:
    device_id:
      type: device_id
    sn_entity_id:
      type: entity_id
      identifier: sn
    battery_entity_id:
      type: entity_id
      identifier: battery
    report_interval_entity_id:
      type: entity_id
      identifier: report_interval
    valve_1_opening_entity_id:
      type: entity_id
      identifier: valve_1_opening
    valve_1_pulse_entity_id:
      type: entity_id
      identifier: valve_1_pulse
    valve_2_opening_entity_id:
      type: entity_id
      identifier: valve_2_opening
    valve_2_pulse_entity_id:
      type: entity_id
      identifier: valve_2_pulse
    valve_1_task_id_entity_key:
      type: entity_key
      identifier: valve_1_task.task_id
    valve_1_task_valve_opening_entity_key:
      type: entity_key
      identifier: valve_1_task.valve_opening
    valve_1_task_pulse_entity_key:
      type: entity_key
      identifier: valve_1_task.pulse
    valve_1_task_time_entity_key:
      type: entity_key
      identifier: valve_1_task.time
    valve_2_task_id_entity_key:
      type: entity_key
      identifier: valve_2_task.task_id
    valve_2_task_valve_opening_entity_key:
      type: entity_key
      identifier: valve_2_task.valve_opening
    valve_2_task_pulse_entity_key:
      type: entity_key
      identifier: valve_2_task.pulse
    valve_2_task_time_entity_key:
      type: entity_key
      identifier: valve_2_task.time